UNDELETE(2)		    BSD System Calls Manual		   UNDELETE(2)

NNAAMMEE
     uunnddeelleettee -- attempt to recover a deleted file

LLIIBBRRAARRYY
     Standard C Library (libc, -lc)

SSYYNNOOPPSSIISS
     ##iinncclluuddee <<uunniissttdd..hh>>

     _i_n_t
     uunnddeelleettee(_c_o_n_s_t _c_h_a_r _*_p_a_t_h);

DDEESSCCRRIIPPTTIIOONN
     The uunnddeelleettee() system call attempts to recover the deleted file named by
     _p_a_t_h.  Currently, this works only when the named object is a whiteout in
     a union file system.  The system call removes the whiteout causing any
     objects in a lower layer of the union stack to become visible once more.

     Eventually, the uunnddeelleettee() functionality may be expanded to other file
     systems able to recover deleted files such as the log-structured file
     system.

RREETTUURRNN VVAALLUUEESS
     The uunnddeelleettee() function returns the value 0 if successful; otherwise the
     value -1 is returned and the global variable _e_r_r_n_o is set to indicate the
     error.

EERRRROORRSS
     The uunnddeelleettee() succeeds unless:

     [ENOTDIR]		A component of the path prefix is not a directory.

     [ENAMETOOLONG]	A component of a pathname exceeded 255 characters, or
			an entire path name exceeded 1023 characters.

     [EEXIST]		The path does not reference a whiteout.

     [ENOENT]		The named whiteout does not exist.

     [EACCES]		Search permission is denied for a component of the
			path prefix.

     [EACCES]		Write permission is denied on the directory containing
			the name to be undeleted.

     [ELOOP]		Too many symbolic links were encountered in translat-
			ing the pathname.

     [EPERM]		The directory containing the name is marked sticky,
			and the containing directory is not owned by the
			effective user ID.

     [EINVAL]		The last component of the path is `..'.

     [EIO]		An I/O error occurred while updating the directory
			entry.

     [EROFS]		The name resides on a read-only file system.

     [EFAULT]		The _p_a_t_h argument points outside the process's allo-
			cated address space.

SSEEEE AALLSSOO
     unlink(2), mount_unionfs(8)

HHIISSTTOORRYY
     The uunnddeelleettee() system call first appeared in 4.4BSD-Lite.

BSD			       January 22, 2006 			   BSD
